<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Synchronous Loading</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 50%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .gm-style-iw {
       background-color: #fff;
       color: #000;
    }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <br>
    Counter 1
    <br>
    <label for="counter1"> Start From</label>
    <input type="number" name="" id="counter1" value="400000">
    <label for="time1"> Speed</label>
    <input type="number" name="" id="time1" value="450">
    <br>
    <br>
    <hr>
    <br>
    Counter 2
    <br>
    <label for="counter2"> Start From</label>
    <input type="number" name="" id="counter2" value="1500000">
    <label for="time2"> Speed</label>
    <input type="number" name="" id="time2" value="5000">
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnuc-eD5w58Dy2EjdUULXABCk7-MYvJcg&callback=initMap"></script>
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 45.516136, lng: -73.656830},
          zoom: 13
        });

        contentString = "<div id='Test1'></div>"
        infowindow = new google.maps.InfoWindow({
          content: contentString
        });

        var marker = new google.maps.Marker({
          position: {lat: 45.516136, lng: -73.656830},
          map: map,
          title: 'First Marker'
        });
        marker.addListener('click', function() {
          infowindow.open(map, marker);
          // startCounter()
        });

        contentString1 = "<div id='Test2'></div>"
        infowindow1 = new google.maps.InfoWindow({
          content: contentString1
        });

        var marker1 = new google.maps.Marker({
          position: {lat: 45.5049, lng: -73.5524},
          map: map,
          title: 'Second Marker'
        });
        marker1.addListener('click', function() {
          infowindow1.open(map, marker1);
          // startCounter()
        });

        google.maps.event.addListener(infowindow, 'domready', function() {
          // var $el = $("#Test1"); //[make sure this is a unique variable name]
            var target = $('#Test1');
            var counter = $("#counter1").val()
            setInterval( function() {
              console.log(target)
              target.html( counter++ );
            }, ($("#time1").val()/1000) );
        });
        google.maps.event.addListener(infowindow1, 'domready', function() {
          // var $el = $("#Test1"); //[make sure this is a unique variable name]
          console.log("test",$(this))
            var target = $('#Test2');
            var counter = $("#counter2").val();
            setInterval( function() {
              console.log(target)
              target.html( counter++ );
            }, ($("#time2").val()/1000) );
        });

      }
      function startCounter(){
        console.log("inside counter")
        var target = $('#Test1');
        var counter = 400000;
        setInterval( function() {
          console.log(target)
          target.html( counter++ );
        }, 0.045 );
      }
    </script>
    <script type="text/javascript">
      //  var $el = $("#test"); //[make sure this is a unique variable name]
      // $({someValue: 40000}).animate({someValue: 99}, {
      //     duration: 10000,
      //     easing:'swing', // can be anything
      //     step: function() { // called on every step
      //         // Update the element's text with rounded-up value:
      //         $el.text(commaSeparateNumber(Math.round(this.someValue)));
      //     }
      // });

     // function commaSeparateNumber(val){
     //    while (/(\d+)(\d{3})/.test(val.toString())){
     //      val = val.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
     //    }
     //    return val;
     //  }

     //  var INTERVAL = 0.450;
     //  $(document).ready( function() {
     //    var delay = INTERVAL;
     //    var target = $('#counter');
     //    var counter = parseInt( target.text(), 10 );
     //    setInterval( function() {
     //      target.text( counter++ );
     //    }, delay );
     //  } );
    </script>
  </body>
</html>